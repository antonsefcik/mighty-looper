#N canvas 65 53 1855 1027 10;
#X obj 16 643 dac~;
#X obj 15 572 r~ main_out;
#X obj 1626 40 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1628 156 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1626 103 s rec_start;
#X obj 1628 189 s rec_stop;
#X text 13 553 /* Main audio output */;
#X text 1624 23 Start recording;
#X text 1626 137 Stop recording / start looping;
#X floatatom 60 594 5 0 5 0 - - -, f 5;
#X obj 48 617 expr~ tanh($v1);
#X obj 38 887 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 77 908 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 77 886 r remove_layer;
#X obj 17 1002 s layer_num;
#X obj 1747 203 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 506 880 float;
#X obj 555 880 r layer_num;
#X obj 506 854 t b b;
#X obj 555 854 s add_layer;
#X obj 38 864 r add_layer;
#X obj 506 904 sel 1 2 3;
#X obj 832 807 float;
#X obj 879 806 r layer_num;
#X obj 832 831 sel 1 2 3;
#X msg 832 884 0;
#X obj 842 863 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1768 230 s rec_start;
#X obj 1724 175 delay 5000;
#X obj 1719 268 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1767 292 s rec_start;
#X obj 1682 233 delay 5000;
#X obj 1341 165 route digital;
#X obj 1340 191 route 2;
#X obj 1310 371 sel 1;
#X msg 1272 349 0;
#X obj 1280 437 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1309 320 1;
#X msg 1360 346 1;
#X floatatom 1354 324 5 0 0 0 - - -, f 5;
#X obj 1340 219 sel 1;
#X obj 1348 258 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1388 255 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1363 434 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#N canvas 525 241 665 492 process_input 0;
#X msg 217 212 add2 \$1;
#X msg 217 246;
#X obj 132 115 route 205 206 207 208;
#X msg 132 144 set analog;
#X msg 291 211 bang \, set;
#X msg 131 185 set digital;
#X obj 132 71 inlet;
#X obj 217 287 outlet;
#X text 178 96 analog_start \; analog_end \; digital_start \; digital_end
;
#X connect 0 0 1 0;
#X connect 1 0 7 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 2 2 5 0;
#X connect 2 3 4 0;
#X connect 2 4 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 2 0;
#X restore 1365 127 pd process_input;
#X msg 1361 61 open 0;
#X msg 1428 62 close;
#X obj 1361 96 comport \$1 9600;
#X obj 1363 23 loadbang;
#N canvas 369 437 524 488 test_dsp 0;
#X obj 136 61 route digital;
#X obj 23 505 osc~ 440;
#X obj 23 589 dac~;
#X msg 104 499 bang \; pd dsp 1 \;;
#X msg 181 459 bang \; pd dsp 0 \;;
#X obj 102 368 sel 1;
#X msg 64 346 0;
#X obj 72 434 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 101 317 1;
#X msg 152 343 1;
#X obj 136 119 sel 1;
#X obj 136 149 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 168 146 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 155 431 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 22 541 *~;
#X msg 105 568 0;
#X obj 137 33 inlet;
#X obj 136 90 route 3;
#X msg 99 455 1;
#X obj 103 540 delay 1000;
#X obj 89 193 r initialised;
#X obj 88 231 0;
#X obj 85 265 sel 0;
#X connect 0 0 17 0;
#X connect 1 0 14 0;
#X connect 3 0 19 0;
#X connect 5 0 6 0;
#X connect 5 0 7 0;
#X connect 5 1 9 0;
#X connect 5 1 13 0;
#X connect 6 0 8 1;
#X connect 7 0 18 0;
#X connect 8 0 5 0;
#X connect 9 0 8 1;
#X connect 10 0 11 0;
#X connect 10 1 12 0;
#X connect 11 0 21 0;
#X connect 13 0 4 0;
#X connect 14 0 2 0;
#X connect 15 0 14 1;
#X connect 16 0 0 0;
#X connect 17 0 10 0;
#X connect 18 0 3 0;
#X connect 18 0 14 1;
#X connect 19 0 15 0;
#X connect 20 0 21 1;
#X connect 21 0 22 0;
#X connect 22 0 8 0;
#X restore 1463 161 pd test_dsp;
#X obj 1431 206 route digital;
#X obj 1430 232 route 3;
#X obj 1230 512 s initialised;
#X msg 1230 475 1;
#N canvas 353 423 870 457 init 0;
#X obj 204 116 loadbang;
#X obj 204 176 samplerate~;
#X obj 204 197 * 3;
#X msg 204 137 bang \; pd dsp 1 \;;
#N canvas 306 289 573 318 trunc_to_blocks 0;
#X obj 173 101 % 64;
#X obj 146 81 t f f;
#X obj 146 121 -;
#X obj 146 59 int;
#X obj 146 17 inlet;
#X obj 146 167 outlet;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X restore 204 222 pd trunc_to_blocks;
#X text 177 7 /* Init: */;
#X text 13 32 /* - turn audio ON */;
#X obj 165 145 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 204 246 s alloc_block_mem_size;
#X text 15 44 /* - calculate size of memory for ~3 second block */
;
#X obj 172 271 samplerate~;
#X obj 172 293 / 1000;
#X obj 140 318 /;
#X obj 140 342 s alloc_block_time;
#X obj 140 249 t b f b;
#X text 486 62 /* channel 1 verse */;
#X text 485 139 /* channel 1 chorus */;
#X obj 422 87 table ch1_t1_l1_a;
#X obj 422 110 table ch1_t1_l2_a;
#X obj 550 87 table ch1_t1_l1_b;
#X obj 550 110 table ch1_t1_l2_b;
#X text 675 104 /* ch - channel */;
#X text 676 116 /* t - track */;
#X text 677 129 /* l - layer */;
#X obj 420 164 table ch1_t2_l1_a;
#X obj 420 186 table ch1_t2_l2_a;
#X obj 549 164 table ch1_t2_l1_b;
#X obj 549 186 table ch1_t2_l2_b;
#X obj 443 31 table t1_dummy;
#X obj 549 31 table t2_dummy;
#X obj 20 334 s reset_looper;
#X text 678 142 /* a/b - version */;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 8 0;
#X connect 4 0 14 0;
#X connect 7 0 1 0;
#X connect 10 0 11 0;
#X connect 11 0 12 1;
#X connect 12 0 13 0;
#X connect 14 0 30 0;
#X connect 14 1 12 0;
#X connect 14 2 10 0;
#X restore 14 455 pd init;
#N canvas 219 178 1280 902 reset_track 0;
#X obj 353 17 inlet;
#X obj 332 117 f;
#X obj 350 91 r alloc_block_mem_size;
#X obj 80 653 s \$1;
#X obj 112 629 symbol;
#X obj 80 582 t b l;
#X msg 188 668 0;
#X msg 80 619 0;
#X msg 112 607 \$2_loop;
#X msg 332 166 0 \$2 \$3 \; \$2_\$3_l1_a resize \$1 \;;
#X msg 332 205 \$1 \$2 \$3 \; \$2_\$3_l1_b resize \$1 \;;
#X msg 332 244 \$1 \$2 \$3 \; \$2_\$3_l1_a const \$1 \;;
#X msg 332 282 \$1 \$2 \$3 \; \$2_\$3_l1_b const \$1 \;;
#X msg 332 322 \$1 \$2 \$3 \; \$2_\$3_l2_a resize \$1 \;;
#X msg 332 360 \$1 \$2 \$3 \; \$2_\$3_l2_b resize \$1 \;;
#X msg 332 399 \$1 \$2 \$3 \; \$2_\$3_l2_a const \$1 \;;
#X msg 332 437 \$1 \$2 \$3 \; \$2_\$3_l2_b const \$1 \;;
#X obj 188 632 t b l;
#X obj 220 678 symbol;
#X msg 220 656 \$2_auto_realloc;
#X obj 188 705 s \$1;
#X obj 985 485 s \$1;
#X obj 1017 461 symbol;
#X obj 985 414 t b l;
#X msg 985 446 0;
#X msg 1017 439 \$2_layer2_loop;
#X obj 907 589 s \$1;
#X obj 939 565 symbol;
#X obj 907 518 t b l;
#X msg 939 543 \$2_reset_counter;
#X obj 353 67 t b l;
#X obj 353 42 list;
#X obj 820 78 s reset_track;
#X msg 831 27 ch1 t1;
#X obj 332 141 list append;
#X msg 332 474 \$1 \$2 \$3 \; \$3_dummy resize \$1 \;;
#X msg 332 513 \$1 \$2 \$3 \; \$3_dummy const \$1 \;;
#X obj 718 600 s swap_reset;
#X msg 718 576 \$3;
#X msg 586 586 \$3;
#X obj 586 610 s reset_counter;
#X msg 354 610 \$1 \$2 l1 0;
#X msg 451 613 \$1 \$2 l2 0;
#X obj 354 644 s layer_loop;
#X obj 451 639 s layer_loop;
#X connect 0 0 31 0;
#X connect 1 0 34 0;
#X connect 2 0 1 1;
#X connect 4 0 3 1;
#X connect 5 0 7 0;
#X connect 5 1 8 0;
#X connect 6 0 20 0;
#X connect 7 0 3 0;
#X connect 8 0 4 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 35 0;
#X connect 17 0 6 0;
#X connect 17 1 19 0;
#X connect 18 0 20 0;
#X connect 19 0 18 0;
#X connect 22 0 21 1;
#X connect 23 0 24 0;
#X connect 23 1 25 0;
#X connect 24 0 21 0;
#X connect 25 0 22 0;
#X connect 27 0 26 1;
#X connect 28 0 26 0;
#X connect 28 1 29 0;
#X connect 29 0 27 0;
#X connect 30 0 1 0;
#X connect 30 1 34 1;
#X connect 31 0 30 0;
#X connect 33 0 32 0;
#X connect 34 0 9 0;
#X connect 35 0 36 0;
#X connect 36 0 5 0;
#X connect 36 0 17 0;
#X connect 36 0 41 0;
#X connect 36 0 38 0;
#X connect 36 0 39 0;
#X connect 36 0 42 0;
#X connect 38 0 37 0;
#X connect 39 0 40 0;
#X connect 41 0 43 0;
#X connect 42 0 44 0;
#X restore 13 526 pd reset_track;
#X obj 13 501 r reset_track;
#X obj 1757 102 delay 2500;
#X obj 1550 356 s reset_track;
#X obj 1680 774 s t1_layer2_loop;
#X obj 1659 728 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 1684 747 0;
#X obj 1614 730 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 1639 750 1;
#N canvas 65 129 450 300 mixer 0;
#X obj 71 91 +~;
#X obj 71 128 s~ main_out;
#X obj 104 38 r~ ch1_t1_l1;
#X obj 103 66 r~ ch1_t1_l2;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X connect 3 0 0 1;
#X restore 79 455 pd mixer;
#X msg 783 954 1;
#X obj 1643 658 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 1668 677 0;
#X obj 1598 660 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 1623 680 1;
#X obj 1664 704 s t1_layer1_loop;
#X obj 1451 264 sel 1;
#X obj 1441 290 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1481 287 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#N canvas 658 369 450 443 alloc 0;
#X obj 120 22 inlet;
#X obj 143 169 -;
#X obj 104 292 pack f s;
#X obj 104 192 spigot;
#X obj 104 214 t b s;
#X obj 120 47 symbol;
#X obj 120 71 t s s b;
#X msg 104 316 \; \$2 resize \$1 \;;
#X obj 274 54 r current_track;
#X obj 235 119 symbol;
#X obj 143 95 expr size("$s1");
#X obj 235 144 expr size("$s1");
#X obj 104 240 symbol;
#X obj 104 267 expr size("$s1");
#X obj 239 37 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 274 76 symbol \$1_dummy;
#X connect 0 0 5 0;
#X connect 1 0 3 1;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 12 0;
#X connect 4 1 2 1;
#X connect 5 0 6 0;
#X connect 6 0 3 0;
#X connect 6 1 10 0;
#X connect 6 2 9 0;
#X connect 8 0 15 0;
#X connect 9 0 11 0;
#X connect 10 0 1 0;
#X connect 11 0 1 1;
#X connect 12 0 13 0;
#X connect 13 0 2 0;
#X connect 14 0 9 0;
#X connect 15 0 9 1;
#X connect 15 0 12 1;
#X restore 253 525 pd alloc;
#X obj 253 501 r alloc;
#X obj 1632 907 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1631 957 dac~;
#X obj 1518 681 r layer_num;
#X floatatom 1518 703 5 0 0 0 - - -, f 5;
#X symbolatom 1245 705 10 0 0 0 - - -, f 10;
#X symbolatom 1388 704 10 0 0 0 - - -, f 10;
#N canvas 878 457 688 533 layer1_rec_start_handle 0;
#X obj 86 62 t b b;
#X obj 86 37 inlet;
#X obj 242 47 s get_current_version_table_name;
#X obj 160 176 r table_name;
#X obj 86 332 s rec_start;
#X obj 6 125 r is_first;
#X obj 86 202 list append;
#X obj 86 229 route 1 0;
#X obj 286 422 s rec_mark;
#X msg 41 168 0;
#X obj 86 167 f;
#X obj 86 255 symbol;
#X obj 286 258 symbol;
#X obj 86 281 t s b;
#X obj 118 309 s auto_realloc_start;
#X obj 400 327 s auto_realloc_mark;
#X msg 400 304 1;
#X obj 286 280 t s b b b;
#X obj 380 348 symbol noswap;
#X obj 306 373 list append;
#X msg 306 346 1;
#X obj 286 396 list append;
#X msg 445 281 0;
#X obj 445 304 s dummy_loop_mark;
#X connect 0 0 10 0;
#X connect 0 1 2 0;
#X connect 1 0 0 0;
#X connect 3 0 6 1;
#X connect 5 0 10 1;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 7 0 11 0;
#X connect 7 1 12 0;
#X connect 9 0 10 1;
#X connect 10 0 6 0;
#X connect 11 0 13 0;
#X connect 12 0 17 0;
#X connect 13 0 4 0;
#X connect 13 1 14 0;
#X connect 16 0 15 0;
#X connect 17 0 21 0;
#X connect 17 1 20 0;
#X connect 17 2 18 0;
#X connect 17 3 16 0;
#X connect 17 3 22 0;
#X connect 18 0 19 1;
#X connect 19 0 21 1;
#X connect 20 0 19 0;
#X connect 21 0 8 0;
#X connect 22 0 23 0;
#X restore 506 977 pd layer1_rec_start_handle;
#N canvas 187 418 540 323 layer2_rec_start_handle 0;
#X obj 177 160 s alloc;
#X obj 137 32 inlet;
#X msg 157 189 1;
#X obj 157 214 list prepend;
#X obj 197 83 s get_current_version_table_name;
#X obj 238 190 r table_name;
#X obj 76 239 list prepend;
#X obj 53 214 symbol noswap;
#X obj 76 265 s rec_mark;
#X obj 137 57 t b b b b;
#X obj 216 111 r table_name;
#X obj 177 136 symbol;
#X connect 1 0 9 0;
#X connect 2 0 3 0;
#X connect 3 0 6 1;
#X connect 5 0 3 1;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 9 0 7 0;
#X connect 9 1 2 0;
#X connect 9 2 11 0;
#X connect 9 3 4 0;
#X connect 10 0 11 1;
#X connect 11 0 0 0;
#X restore 526 953 pd layer2_rec_start_handle;
#X text 510 764 /* Handle "rec_start" signal */;
#X text 787 762 /* Handle "rec_stop" signal */;
#N canvas 997 324 813 663 auto_reallocer 0;
#X obj 78 265 spigot;
#X obj 78 164 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 78 303 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 78 481 +;
#X obj 346 227 samplerate~;
#X obj 283 249 t b f b;
#X obj 307 322 *;
#X obj 283 343 +;
#X obj 346 248 / 1000;
#X text 40 44 /* Re-allocating track_1 size */;
#X text 41 60 /* when end is reached */;
#X text 283 131 /* Truncating redundant */;
#X text 283 145 /* pre-allocated track_1 */;
#X text 285 160 /* size after recording */;
#X text 285 173 /* is stopped */;
#X obj 78 142 t b f;
#X obj 554 145 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 283 205 timer;
#X obj 96 457 r alloc_block_mem_size;
#X obj 110 193 r alloc_block_time;
#X obj 78 242 delay;
#X obj 335 205 r alloc_block_time;
#X obj 283 227 -;
#X obj 110 215 / 2;
#X obj 123 305 delay;
#X obj 123 328 spigot;
#X obj 283 381 - 0;
#X obj 357 327 r alloc_block_mem_size;
#X obj 322 350 f;
#X msg 324 380 0;
#N canvas 303 293 573 318 trunc_to_blocks 0;
#X obj 173 101 % 64;
#X obj 146 81 t f f;
#X obj 146 121 -;
#X obj 146 59 int;
#X obj 146 17 inlet;
#X obj 146 167 outlet;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X restore 283 407 pd trunc_to_blocks;
#X obj 78 78 inlet start;
#X obj 393 51 inlet mark;
#X obj 281 83 spigot;
#X msg 343 83 0;
#X msg 281 105 1;
#X msg 78 110 1;
#X obj 531 73 inlet stop;
#X msg 500 101 0;
#X obj 151 168 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 117 357 r current_track;
#X obj 78 406 symbol;
#X msg 117 379 symbol ch1_\$1_l1_a;
#X obj 78 433 expr size("$s1");
#X obj 78 506 list append;
#X obj 410 256 r current_track;
#X obj 283 274 symbol;
#X msg 410 278 symbol ch1_\$1_l1_a;
#X obj 283 301 expr size("$s1");
#X obj 152 479 r current_track;
#X msg 78 534 \; ch1_\$2_l1_a resize \$1 \;;
#X msg 283 480 \$1 \$2 \; ch1_\$2_l1_a resize \$1 \;;
#X msg 283 518 \; \$2_dummy resize \$1 \;;
#X obj 283 454 list append;
#X obj 357 429 r current_track;
#X floatatom 395 90 5 0 0 0 - - -, f 5;
#X obj 447 79 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 178 151 5 0 0 0 - - -, f 5;
#X obj 281 52 r new_cycle_set;
#X connect 0 0 2 0;
#X connect 0 0 24 0;
#X connect 1 0 20 0;
#X connect 2 0 41 0;
#X connect 3 0 44 0;
#X connect 4 0 8 0;
#X connect 5 0 46 0;
#X connect 5 1 6 0;
#X connect 5 2 4 0;
#X connect 6 0 7 1;
#X connect 7 0 26 0;
#X connect 8 0 6 1;
#X connect 15 0 1 0;
#X connect 15 1 0 1;
#X connect 15 1 25 1;
#X connect 15 1 57 0;
#X connect 16 0 17 1;
#X connect 17 0 22 0;
#X connect 18 0 3 1;
#X connect 19 0 23 0;
#X connect 20 0 0 0;
#X connect 20 0 28 0;
#X connect 21 0 22 1;
#X connect 22 0 5 0;
#X connect 23 0 20 1;
#X connect 23 0 24 1;
#X connect 24 0 25 0;
#X connect 24 0 29 0;
#X connect 25 0 36 0;
#X connect 26 0 30 0;
#X connect 27 0 28 1;
#X connect 28 0 26 1;
#X connect 29 0 26 1;
#X connect 30 0 53 0;
#X connect 31 0 36 0;
#X connect 32 0 33 1;
#X connect 32 0 55 0;
#X connect 32 0 56 0;
#X connect 33 0 34 0;
#X connect 33 0 35 0;
#X connect 34 0 33 1;
#X connect 35 0 15 0;
#X connect 36 0 15 0;
#X connect 36 0 39 0;
#X connect 37 0 38 0;
#X connect 37 0 16 0;
#X connect 38 0 15 0;
#X connect 39 0 17 0;
#X connect 40 0 42 0;
#X connect 41 0 43 0;
#X connect 42 0 41 1;
#X connect 43 0 3 0;
#X connect 44 0 50 0;
#X connect 45 0 47 0;
#X connect 46 0 48 0;
#X connect 47 0 46 1;
#X connect 48 0 7 0;
#X connect 49 0 44 1;
#X connect 51 0 52 0;
#X connect 53 0 51 0;
#X connect 54 0 53 1;
#X connect 58 0 33 0;
#X restore 332 525 pd auto_reallocer;
#N canvas 624 348 450 300 channel_test 0;
#X obj 15 7 adc~;
#X obj 16 75 *~ 1;
#X obj 63 75 *~ 0;
#X obj 203 20 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 154 5 sel 1;
#X msg 70 4 0;
#X msg 117 4 1;
#X msg 109 44 0;
#X msg 63 33 1;
#X obj 152 43 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 5 53 5 0 0 0 - - -, f 5;
#X floatatom 124 85 5 0 0 0 - - -, f 5;
#X obj 58 133 metro 100;
#X obj 18 154 tabwrite~ track_1_monitor;
#X obj 58 113 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 79 114 monitor ON/OFF;
#X text 222 19 /* switch channels */;
#N canvas 65 85 450 250 (subpatch) 0;
#X array track_1_monitor 100 float 5;
#A 0 -0.000376701 -0.000503182 -0.00070715 -0.000445485 -0.000537276
-0.000216126 -0.000398874 -0.000912309 -0.000821233 -0.000342846 -0.000671506
-0.000846386 -0.000445843 -0.000249982 -0.000455976 -0.000456452 -0.000593662
-0.000365615 -0.000605106 -0.000137687 -0.000103712 -0.000628471 -0.000308752
-0.000546098 -0.000594378 -0.000377417 -0.000741959 -0.000388503 -0.000604987
-0.000720024 -0.000697494 -0.000216842 -0.000410557 -0.000559449 -0.000788689
-0.000728965 -0.000720501 -0.000671983 -0.000788569 -0.000468731 -0.000445008
-0.000593543 -0.000720739 -0.000319481 -0.000730038 -0.00044632 -0.00038743
-0.000686169 -0.000445247 -0.000662088 -0.000491858 -0.000320077 -0.000285387
-0.000181794 -0.000400424 -0.000354409 -5.91278e-05 -0.000193 -0.000525594
-0.000115275 -0.000241041 -0.000434399 -2.39611e-05 -0.000114799 9.01222e-05
0.000169754 0.000228524 9.08375e-05 0.000409722 0.000317574 0.000341296
0.00019145 0.000466347 0.000340343 0.000305414 0.000522852 0.000717163
0.00064981 0.000443101 0.00082159 0.000898957 0.000821829 0.000772476
0.00107038 0.000752807 0.00128651 0.00157261 0.00137806 0.00095582
0.00156164 0.00132036 0.00120902 0.00138998 0.00132132 0.00112557 0.00133336
0.00129926 0.00159454 0.00146008 0.00179875;
#X coords 0 1 99 -1 200 140 1;
#X restore 239 143 graph;
#X connect 0 0 1 0;
#X connect 0 1 2 0;
#X connect 1 0 13 0;
#X connect 2 0 13 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 6 0;
#X connect 4 1 9 0;
#X connect 5 0 1 1;
#X connect 5 0 10 0;
#X connect 6 0 11 0;
#X connect 6 0 2 1;
#X connect 7 0 2 1;
#X connect 7 0 11 0;
#X connect 8 0 1 1;
#X connect 8 0 10 0;
#X connect 9 0 7 0;
#X connect 9 0 8 0;
#X connect 12 0 13 0;
#X connect 14 0 12 0;
#X restore 141 475 pd channel_test;
#X text 13 681 /* Main audio input */;
#X obj 17 703 adc~;
#X obj 17 751 s~ main_in;
#N canvas 1057 333 722 464 extra_layer_rec_start_handle 0;
#X obj 137 32 inlet;
#X obj 340 214 s alloc;
#X obj 44 190 s alloc;
#X obj 12 96 t b b;
#X msg 12 179 1;
#X obj 321 263 list prepend;
#X msg 321 238 1;
#X obj 358 141 s get_opposite_version_table_name;
#X obj 402 238 r table_name;
#X obj 377 117 s remove_layer;
#X obj 240 290 list prepend;
#X obj 233 263 symbol swap;
#X obj 240 318 s rec_mark;
#X obj 12 213 s mark_for_shift_merge;
#X obj 340 188 symbol;
#X obj 303 91 t b b b b b;
#X obj 379 164 r table_name;
#X obj 44 143 s get_opposite_version_table_name;
#X obj 44 166 r table_name_for_layer;
#X msg 44 120 l1;
#X connect 0 0 3 0;
#X connect 0 0 15 0;
#X connect 3 0 4 0;
#X connect 3 1 19 0;
#X connect 4 0 13 0;
#X connect 5 0 10 1;
#X connect 6 0 5 0;
#X connect 8 0 5 1;
#X connect 10 0 12 0;
#X connect 11 0 10 0;
#X connect 14 0 1 0;
#X connect 15 0 11 0;
#X connect 15 1 6 0;
#X connect 15 2 14 0;
#X connect 15 3 7 0;
#X connect 15 4 9 0;
#X connect 16 0 14 1;
#X connect 18 0 2 0;
#X connect 19 0 17 0;
#X restore 546 929 pd extra_layer_rec_start_handle;
#N canvas 337 312 679 532 shifter_merger 0;
#X obj 267 25 inlet mark_shift_merge;
#X text 11 3 /* send 1 to mark fpr shifting and merging \, 0 to unmark
for shifting and merging */;
#X obj 33 143 +~;
#X obj 51 208 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 156 205 0;
#X msg 76 233 stop;
#X obj 76 208 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 122 153 float 0;
#X msg 122 206 2;
#X obj 122 177 sel 1 2;
#X obj 34 327 tabwrite~;
#X obj 33 79 r~ ch1_t1_l1;
#X obj 50 104 r~ ch1_t1_l2;
#X obj 135 277 symbol;
#X obj 224 275 r opposite_version;
#X obj 135 233 r new_cycle_set;
#X obj 122 127 r new_cycle;
#X obj 174 254 r table_name_for_layer;
#X msg 135 301 set \$1;
#X connect 0 0 7 1;
#X connect 2 0 10 0;
#X connect 3 0 10 0;
#X connect 4 0 7 1;
#X connect 5 0 10 0;
#X connect 6 0 5 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 3 0;
#X connect 9 0 8 0;
#X connect 9 1 4 0;
#X connect 9 1 6 0;
#X connect 11 0 2 0;
#X connect 12 0 2 1;
#X connect 13 0 18 0;
#X connect 15 0 13 0;
#X connect 16 0 7 0;
#X connect 17 0 13 1;
#X connect 18 0 10 0;
#X restore 567 359 pd shifter_merger;
#X msg 567 335 1;
#X obj 1632 931 tabplay~;
#X obj 129 500 r reset_looper;
#N canvas 210 235 673 327 reset_looper 0;
#X obj 275 46 inlet;
#X obj 177 101 s swap_reset;
#X obj 352 137 s reset_track;
#X msg 295 105 ch1 t1;
#X msg 352 106 ch1 t2;
#X obj 275 70 t b b;
#X obj 275 167 s is_first;
#X msg 275 141 1;
#X connect 0 0 5 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 1 0;
#X connect 5 0 7 0;
#X connect 5 1 4 0;
#X connect 5 1 3 0;
#X connect 7 0 6 0;
#X restore 129 525 pd reset_looper;
#X text 125 99 /* dummy layer looping */;
#X obj 1005 60 sel 0;
#X text 902 10 /* layer1 looping */;
#X obj 783 897 t b b;
#X msg 1550 332 ch1 t1;
#X msg 1426 815 set ch1_t1_l1_a;
#N canvas 404 121 1519 856 swapper 0;
#X obj 321 629 symbol;
#X obj 456 608 symbol;
#X obj 360 603 symbol;
#X obj 360 539 t b b b;
#X obj 337 461 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 41 218 symbol;
#X obj 191 197 symbol;
#X obj 114 87 t b b;
#X obj 80 192 symbol;
#X obj 47 122 t b b b;
#X obj 14 77 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 213 53 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 109 122 symbol t2;
#X msg 230 121 symbol t1;
#X obj 702 95 symbol;
#X obj 642 61 t s b;
#X obj 642 132 list prepend;
#X obj 642 177 route t1 t2;
#X obj 642 154 list trim;
#X obj 749 60 t s b;
#X obj 749 129 list prepend;
#X obj 749 174 route t1 t2;
#X obj 749 151 list trim;
#X obj 864 201 route t1 t2;
#X msg 867 163 \$1;
#X obj 480 399 s set_current_version;
#X obj 749 199 symbol;
#X obj 802 199 symbol;
#X obj 642 201 symbol;
#X obj 695 201 symbol;
#X obj 456 539 r set_current_version;
#X obj 289 528 t b s;
#X obj 713 245 t b b;
#X obj 707 306 t b b;
#X obj 43 20 inlet swap_tracks;
#X obj 424 11 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 364 10 t1;
#X msg 394 10 t2;
#X obj 292 428 inlet swap_versions;
#X obj 461 52 route t1 t2;
#X msg 441 196 symbol a;
#X msg 517 196 symbol b;
#X obj 643 288 symbol;
#X obj 644 334 symbol;
#X obj 750 284 symbol;
#X obj 752 336 symbol;
#X obj 461 142 t b b;
#X msg 475 295 symbol a;
#X msg 551 295 symbol b;
#X obj 408 250 t b b;
#X obj 535 244 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 191 220 s current_track_internal;
#X obj 642 18 r current_version_internal;
#X obj 762 81 r current_track_internal;
#X obj 399 562 r current_version_internal;
#X obj 456 631 s current_version_internal;
#X obj 119 144 r current_track_internal;
#X obj 188 833 outlet current_track;
#X obj 601 831 outlet current_version;
#X obj 188 796 r current_track_internal;
#X obj 601 795 r current_version_internal;
#X obj 247 166 r opposite_track_internal;
#X obj 41 244 s opposite_track_internal;
#X obj 388 795 r opposite_track_internal;
#X obj 388 830 outlet opposite_track;
#X obj 813 793 r opposite_version_internal;
#X obj 813 823 outlet opposite_version;
#X obj 749 39 r opposite_version_internal;
#X obj 804 392 s set_opposite_version;
#X obj 289 506 r set_opposite_version;
#X obj 495 584 r opposite_version_internal;
#X obj 321 651 s opposite_version_internal;
#X obj 461 12 inlet reset;
#X connect 0 0 71 0;
#X connect 1 0 55 0;
#X connect 2 0 0 1;
#X connect 3 0 2 0;
#X connect 3 1 0 0;
#X connect 3 2 1 0;
#X connect 4 0 3 0;
#X connect 5 0 62 0;
#X connect 6 0 51 0;
#X connect 7 0 9 0;
#X connect 7 1 13 0;
#X connect 7 1 12 0;
#X connect 8 0 5 1;
#X connect 9 0 8 0;
#X connect 9 1 5 0;
#X connect 9 2 6 0;
#X connect 10 0 9 0;
#X connect 11 0 7 0;
#X connect 12 0 5 1;
#X connect 13 0 6 1;
#X connect 14 0 16 1;
#X connect 14 0 20 1;
#X connect 15 0 16 0;
#X connect 15 1 14 0;
#X connect 16 0 18 0;
#X connect 17 0 28 0;
#X connect 17 1 29 0;
#X connect 18 0 17 0;
#X connect 19 0 20 0;
#X connect 19 1 14 0;
#X connect 20 0 22 0;
#X connect 21 0 26 0;
#X connect 21 1 27 0;
#X connect 22 0 21 0;
#X connect 23 0 32 0;
#X connect 23 1 33 0;
#X connect 24 0 23 0;
#X connect 26 0 44 1;
#X connect 27 0 45 1;
#X connect 28 0 42 1;
#X connect 29 0 43 1;
#X connect 30 0 1 0;
#X connect 31 0 2 0;
#X connect 31 1 0 0;
#X connect 32 0 44 0;
#X connect 32 1 42 0;
#X connect 33 0 45 0;
#X connect 33 1 43 0;
#X connect 34 0 9 0;
#X connect 35 0 39 0;
#X connect 36 0 39 0;
#X connect 37 0 39 0;
#X connect 38 0 3 0;
#X connect 39 0 46 0;
#X connect 39 1 49 0;
#X connect 39 2 46 0;
#X connect 39 2 50 0;
#X connect 39 2 7 0;
#X connect 40 0 42 1;
#X connect 41 0 44 1;
#X connect 42 0 25 0;
#X connect 43 0 25 0;
#X connect 44 0 68 0;
#X connect 45 0 68 0;
#X connect 46 0 32 0;
#X connect 46 1 40 0;
#X connect 46 1 41 0;
#X connect 47 0 43 1;
#X connect 48 0 45 1;
#X connect 49 0 33 0;
#X connect 49 1 47 0;
#X connect 49 1 48 0;
#X connect 50 0 48 0;
#X connect 50 0 47 0;
#X connect 52 0 15 0;
#X connect 53 0 14 1;
#X connect 53 0 24 0;
#X connect 54 0 2 1;
#X connect 56 0 8 1;
#X connect 59 0 57 0;
#X connect 60 0 58 0;
#X connect 61 0 6 1;
#X connect 63 0 64 0;
#X connect 65 0 66 0;
#X connect 67 0 19 0;
#X connect 69 0 31 0;
#X connect 70 0 1 1;
#X connect 72 0 39 0;
#X restore 256 892 pd swapper;
#X obj 289 846 r swap_versions;
#X obj 268 856 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 234 855 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X symbolatom 1245 752 10 0 0 0 - - -, f 10;
#X symbolatom 1388 750 10 0 0 0 - - -, f 10;
#X obj 1388 726 r current_track;
#X obj 323 867 r swap_reset;
#X obj 344 892 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1388 681 r current_version;
#X obj 256 990 s current_track;
#X obj 300 942 s current_version;
#X obj 116 931 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 116 908 r reset_counter;
#N canvas 600 274 703 520 table_name_builder 0;
#X obj 261 271 r current_version;
#X obj 208 320 list append;
#X obj 222 296 symbol;
#X obj 247 220 r layer_num;
#X obj 225 176 r current_track;
#X obj 186 248 symbol;
#X obj 186 347 list append;
#X obj 164 8 r get_current_version_table_name;
#X obj 429 8 r get_opposite_version_table_name;
#X obj 362 301 symbol;
#X obj 429 172 t b b b;
#X obj 59 403 s table_name;
#X obj 401 272 r opposite_version;
#X obj 186 394 symbol;
#X obj 208 271 symbol;
#X msg 247 247 symbol l\$1;
#X msg 186 370 ch1_\$1_\$2_\$3;
#X obj 164 176 t b b b;
#X obj 164 31 route bang;
#X obj 224 144 symbol;
#X obj 231 120 s get_layer;
#X obj 429 32 route bang;
#X obj 489 140 symbol;
#X obj 496 116 s get_layer;
#X obj 160 491 s table_name_for_layer;
#X obj 186 464 s \$1;
#X obj 211 416 r set_output;
#X obj 317 120 s set_output;
#X msg 317 96 table_name;
#X obj 164 61 t b b;
#X msg 403 96 table_name_for_layer;
#X obj 231 62 t b b a b;
#X obj 496 58 t b b a b;
#X obj 211 441 symbol;
#X obj 429 57 t b b;
#X connect 0 0 2 1;
#X connect 1 0 6 1;
#X connect 2 0 1 1;
#X connect 3 0 15 0;
#X connect 4 0 5 1;
#X connect 5 0 6 0;
#X connect 6 0 16 0;
#X connect 7 0 18 0;
#X connect 8 0 21 0;
#X connect 9 0 1 1;
#X connect 10 0 5 0;
#X connect 10 1 14 0;
#X connect 10 2 9 0;
#X connect 12 0 9 1;
#X connect 13 0 25 0;
#X connect 14 0 1 0;
#X connect 15 0 14 1;
#X connect 16 0 13 0;
#X connect 17 0 5 0;
#X connect 17 1 14 0;
#X connect 17 2 2 0;
#X connect 18 0 29 0;
#X connect 18 1 31 0;
#X connect 19 0 14 1;
#X connect 21 0 28 0;
#X connect 21 0 34 0;
#X connect 21 1 32 0;
#X connect 22 0 14 1;
#X connect 26 0 33 0;
#X connect 28 0 27 0;
#X connect 29 0 17 0;
#X connect 29 1 28 0;
#X connect 30 0 27 0;
#X connect 31 0 20 0;
#X connect 31 1 17 0;
#X connect 31 2 19 0;
#X connect 31 3 30 0;
#X connect 32 0 23 0;
#X connect 32 1 10 0;
#X connect 32 2 22 0;
#X connect 32 3 30 0;
#X connect 33 0 25 1;
#X connect 34 0 10 0;
#X connect 34 1 28 0;
#X restore 149 454 pd table_name_builder;
#X msg 1447 836 set ch1_t1_l2_a;
#X msg 1468 890 set ch1_t1_l2_b;
#X msg 1459 862 set ch1_t1_l1_b;
#N canvas 548 164 1185 447 recorder 0;
#X msg 918 340 stop;
#X obj 592 169 spigot;
#X msg 653 128 1;
#X msg 600 127 0;
#X obj 497 87 t b b;
#X obj 628 252 spigot;
#X msg 667 227 1;
#X msg 708 226 0;
#X obj 517 298 r~ main_in;
#X text 297 171 /* start recording on new cycle ON/OFF */;
#X text 932 31 /* send bang to stop recording */;
#X text 337 49 /* start recording when new_cycle received */;
#X obj 473 216 delay 100;
#X text 77 216 /* wait 100ms to avoid playing what's being recorded
*/;
#X text 252 260 /* mark layer2 for playing */;
#X obj 592 353 tabwrite~;
#X obj 628 308 s swap_versions;
#X obj 348 75 inlet record;
#X obj 668 46 inlet mark_for_record;
#X obj 1024 54 inlet stop;
#X msg 629 82 \$2;
#X msg 794 303 set \$1;
#X msg 749 87 \$3;
#X obj 749 109 route swap noswap;
#X obj 348 97 t b s;
#X msg 418 134 set \$1;
#X msg 473 240 ch1 t1 l2 1;
#X obj 497 65 r new_cycle;
#X obj 473 263 s layer_loop;
#X connect 0 0 15 0;
#X connect 1 0 5 0;
#X connect 1 0 12 0;
#X connect 1 0 15 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 4 0 3 0;
#X connect 4 1 1 0;
#X connect 5 0 7 0;
#X connect 5 0 16 0;
#X connect 6 0 5 1;
#X connect 7 0 5 1;
#X connect 8 0 15 0;
#X connect 12 0 26 0;
#X connect 17 0 24 0;
#X connect 18 0 21 0;
#X connect 18 0 20 0;
#X connect 18 0 22 0;
#X connect 19 0 0 0;
#X connect 20 0 1 1;
#X connect 21 0 15 0;
#X connect 22 0 23 0;
#X connect 23 0 6 0;
#X connect 23 1 7 0;
#X connect 24 0 15 0;
#X connect 24 1 25 0;
#X connect 25 0 15 0;
#X connect 26 0 28 0;
#X connect 27 0 4 0;
#X restore 536 235 pd recorder;
#X obj 459 194 r rec_start;
#X obj 597 189 r rec_mark;
#X obj 659 211 r rec_stop;
#X obj 1267 476 s start_rec;
#X obj 506 781 r start_rec;
#X obj 1372 474 s stop_rec;
#X obj 832 784 r stop_rec;
#X obj 323 920 s opposite_version;
#X obj 278 965 s opposite_track;
#X obj 1245 681 r opposite_version;
#X obj 1245 728 r opposite_track;
#X text 533 165 /* recording */;
#X obj 567 312 r mark_for_shift_merge;
#X obj 863 863 s rec_stop;
#X obj 1378 378 r new_cycle;
#X obj 17 728 *~ 1;
#X obj 15 593 *~ 1;
#N canvas 117 396 790 450 dummy_looper 0;
#X msg 179 141 stop;
#X obj 188 77 sel 0;
#X text 231 84 /* loop start */;
#X text 67 84 /* loop stop */;
#X text 11 193 /* keep loopoing ON/OFF */;
#X obj 188 54 inlet start_stop;
#X text 128 23 /* send 1 for start looping of whole track \, 0 for
stop looping whole track */;
#X obj 266 253 t b b;
#X obj 213 163 r new_cycle;
#X obj 266 299 s new_cycle;
#X obj 298 275 s new_cycle_set;
#X obj 588 76 inlet mark;
#X obj 344 144 r current_track;
#X obj 305 170 symbol;
#X msg 305 196 set \$1_dummy;
#X obj 213 225 tabplay~;
#X obj 213 195 spigot;
#X obj 305 121 r new_cycle_set;
#X obj 220 101 t b f;
#X connect 0 0 15 0;
#X connect 1 0 0 0;
#X connect 1 1 18 0;
#X connect 5 0 1 0;
#X connect 7 0 9 0;
#X connect 7 1 10 0;
#X connect 8 0 16 0;
#X connect 11 0 16 1;
#X connect 12 0 13 1;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 1 7 0;
#X connect 16 0 15 0;
#X connect 17 0 13 0;
#X connect 18 0 7 0;
#X connect 18 1 16 1;
#X restore 128 148 pd dummy_looper;
#X msg 815 930 ch1 t1 l1 1;
#X obj 1436 337 s reset_looper;
#X obj 626 829 s swap_tracks;
#X obj 594 805 t b b;
#X msg 1690 829 set ch1_t2_l1_a;
#X msg 1711 850 set ch1_t2_l2_a;
#X msg 1723 876 set ch1_t2_l1_b;
#X msg 1732 904 set ch1_t2_l2_b;
#X obj 341 477 r auto_realloc_mark;
#X obj 332 455 r auto_realloc_start;
#X obj 387 499 r auto_realloc_stop;
#X obj 832 909 s auto_realloc_stop;
#N canvas 752 469 580 300 looper_controls 1;
#X obj 225 108 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 231 172 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 105 135 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 105 160 0;
#X obj 224 138 s start_rec;
#X obj 231 205 s stop_rec;
#X obj 224 36 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 42 37 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 37 84 s reset_looper;
#X obj 63 138 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 63 162 1;
#X obj 347 98 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 211 75 s swap_tracks_start_rec;
#X obj 345 140 s swap_tracks;
#X obj 105 184 s dummy_loop;
#X connect 0 0 4 0;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 14 0;
#X connect 6 0 12 0;
#X connect 7 0 8 0;
#X connect 9 0 10 0;
#X connect 10 0 14 0;
#X connect 11 0 13 0;
#X restore 313 631 pd looper_controls;
#X obj 616 25 r new_cycle;
#X obj 617 58 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 495 57 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 494 24 r new_cycle_set;
#X obj 1585 837 notein;
#N canvas 831 161 718 409 testis 0;
#X obj 93 103 s get_current_version_table_name;
#X obj 102 40 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 57 162 r table_name;
#X obj 19 35 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 200 196 print;
#X obj 200 161 r layer_num;
#X obj 327 148 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 318 211 s get_layer;
#X obj 57 197 print table_name;
#X obj 89 238 r table_name_for_layer;
#X obj 89 273 print table_name_for_layer;
#X msg 47 58 l1;
#X obj 377 30 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 294 25 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 322 48 l1;
#X obj 368 93 s get_opposite_version_table_name;
#X connect 1 0 0 0;
#X connect 3 0 11 0;
#X connect 6 0 7 0;
#X connect 11 0 0 0;
#X connect 12 0 15 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X restore 87 410 pd testis;
#X obj 17 863 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 17 839 r get_layer;
#X obj 256 824 r swap_tracks;
#X obj 594 781 r swap_tracks_start_rec;
#X obj 128 119 r dummy_loop;
#X obj 783 978 s dummy_loop;
#X obj 1005 34 r dummy_loop;
#N canvas 735 205 1080 736 layer_looper 0;
#X obj 312 323 spigot;
#X obj 169 37 inlet mark_for_play;
#X text 98 10 /* send 1 to mark for playing \, 0 to mark for stop playing
*/;
#X obj 312 486 tabplay~;
#X obj 169 59 route ch1 ch2;
#X obj 169 84 route t1 t2;
#X obj 256 84 route t1 t2;
#X obj 351 281 f;
#X obj 132 211 f;
#X obj 200 214 f;
#X obj 236 214 f;
#X obj 232 378 inlet stop;
#X text 77 361 /* send bang to stop playing */;
#X msg 232 403 stop;
#X obj 313 512 s~ ch1_t1_l1;
#X obj 398 409 r current_version;
#X obj 478 147 r new_cycle;
#X obj 324 362 r new_cycle_set;
#X obj 602 487 tabplay~;
#X obj 603 516 s~ ch1_t1_l2;
#X obj 602 316 spigot;
#X obj 351 251 r new_cycle_set;
#X obj 81 110 route l1 l2;
#X obj 169 110 route l1 l2;
#X obj 256 110 route l1 l2;
#X obj 344 110 route l1 l2;
#X obj 641 287 f;
#X obj 641 257 r new_cycle_set;
#X obj 363 385 r current_track;
#X obj 324 407 symbol;
#X obj 324 433 list append;
#X msg 324 462 set ch1_\$1_l1_\$2;
#X obj 688 409 r current_version;
#X obj 614 362 r new_cycle_set;
#X obj 653 385 r current_track;
#X obj 614 407 symbol;
#X obj 614 433 list append;
#X msg 614 462 set ch1_\$1_l2_\$2;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 3 0 14 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 5 0 22 0;
#X connect 5 1 23 0;
#X connect 6 0 24 0;
#X connect 6 1 25 0;
#X connect 7 0 0 1;
#X connect 11 0 13 0;
#X connect 13 0 3 0;
#X connect 13 0 18 0;
#X connect 15 0 30 1;
#X connect 16 0 0 0;
#X connect 16 0 20 0;
#X connect 17 0 29 0;
#X connect 18 0 19 0;
#X connect 20 0 18 0;
#X connect 21 0 7 0;
#X connect 22 0 7 1;
#X connect 22 1 26 1;
#X connect 23 0 7 1;
#X connect 23 0 26 1;
#X connect 26 0 20 1;
#X connect 27 0 26 0;
#X connect 28 0 29 1;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 31 0 3 0;
#X connect 32 0 36 1;
#X connect 33 0 35 0;
#X connect 34 0 35 1;
#X connect 35 0 36 0;
#X connect 36 0 37 0;
#X connect 37 0 18 0;
#X restore 903 86 pd layer_looper;
#X obj 903 60 r layer_loop;
#X obj 815 954 s layer_loop;
#X obj 230 120 r dummy_loop_mark;
#X obj 17 977 counter;
#X msg 38 907 incr;
#X msg 77 930 decr;
#X msg 116 953 reset;
#X text 14 815 /* track_1 layer counter */;
#X connect 1 0 138 0;
#X connect 2 0 4 0;
#X connect 2 0 57 0;
#X connect 3 0 5 0;
#X connect 9 0 138 1;
#X connect 11 0 171 0;
#X connect 12 0 172 0;
#X connect 13 0 12 0;
#X connect 15 0 27 0;
#X connect 16 0 21 0;
#X connect 17 0 16 1;
#X connect 18 0 16 0;
#X connect 18 1 19 0;
#X connect 20 0 11 0;
#X connect 21 0 82 0;
#X connect 21 1 83 0;
#X connect 21 2 91 0;
#X connect 22 0 24 0;
#X connect 23 0 22 1;
#X connect 24 0 25 0;
#X connect 24 0 26 0;
#X connect 24 0 100 0;
#X connect 24 1 135 0;
#X connect 25 0 151 0;
#X connect 28 0 15 0;
#X connect 29 0 30 0;
#X connect 31 0 29 0;
#X connect 32 0 33 0;
#X connect 33 0 40 0;
#X connect 34 0 35 0;
#X connect 34 0 36 0;
#X connect 34 1 38 0;
#X connect 34 1 43 0;
#X connect 35 0 37 1;
#X connect 36 0 53 0;
#X connect 36 0 125 0;
#X connect 37 0 34 0;
#X connect 37 0 39 0;
#X connect 38 0 37 1;
#X connect 40 0 41 0;
#X connect 40 1 42 0;
#X connect 41 0 37 0;
#X connect 43 0 127 0;
#X connect 44 0 32 0;
#X connect 44 0 49 0;
#X connect 44 0 50 0;
#X connect 45 0 47 0;
#X connect 46 0 47 0;
#X connect 47 0 44 0;
#X connect 48 0 45 0;
#X connect 50 0 51 0;
#X connect 51 0 71 0;
#X connect 53 0 52 0;
#X connect 56 0 55 0;
#X connect 57 0 3 0;
#X connect 60 0 61 0;
#X connect 61 0 59 0;
#X connect 62 0 63 0;
#X connect 63 0 59 0;
#X connect 65 0 164 0;
#X connect 66 0 67 0;
#X connect 67 0 70 0;
#X connect 68 0 69 0;
#X connect 69 0 70 0;
#X connect 71 0 72 0;
#X connect 71 1 73 0;
#X connect 72 0 141 0;
#X connect 75 0 74 0;
#X connect 76 0 94 0;
#X connect 78 0 79 0;
#X connect 89 0 137 0;
#X connect 93 0 92 0;
#X connect 94 0 77 0;
#X connect 94 0 77 1;
#X connect 95 0 96 0;
#X connect 98 0 166 1;
#X connect 100 0 65 0;
#X connect 100 1 140 0;
#X connect 101 0 58 0;
#X connect 102 0 94 0;
#X connect 103 0 113 0;
#X connect 103 1 130 0;
#X connect 103 2 114 0;
#X connect 103 3 129 0;
#X connect 104 0 103 1;
#X connect 105 0 103 1;
#X connect 106 0 103 0;
#X connect 109 0 108 0;
#X connect 110 0 103 2;
#X connect 111 0 103 2;
#X connect 112 0 81 0;
#X connect 115 0 173 0;
#X connect 116 0 115 0;
#X connect 118 0 94 0;
#X connect 119 0 94 0;
#X connect 120 0 94 0;
#X connect 122 0 121 0;
#X connect 123 0 121 1;
#X connect 124 0 121 2;
#X connect 126 0 18 0;
#X connect 128 0 22 0;
#X connect 131 0 80 0;
#X connect 132 0 107 0;
#X connect 134 0 93 0;
#X connect 136 0 38 0;
#X connect 137 0 90 0;
#X connect 138 0 0 0;
#X connect 138 0 0 1;
#X connect 140 0 168 0;
#X connect 143 0 18 0;
#X connect 143 1 142 0;
#X connect 144 0 94 0;
#X connect 145 0 94 0;
#X connect 146 0 94 0;
#X connect 147 0 94 0;
#X connect 148 0 86 1;
#X connect 149 0 86 0;
#X connect 150 0 86 2;
#X connect 153 0 154 0;
#X connect 156 0 155 0;
#X connect 157 0 76 0;
#X connect 159 0 170 0;
#X connect 160 0 159 0;
#X connect 161 0 103 0;
#X connect 162 0 143 0;
#X connect 163 0 139 0;
#X connect 165 0 98 0;
#X connect 167 0 166 0;
#X connect 169 0 139 1;
#X connect 170 0 14 0;
#X connect 171 0 170 0;
#X connect 172 0 170 0;
#X connect 173 0 170 0;
